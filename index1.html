<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.7.0/d3.min.js"></script>
    <link rel="stylesheet" href="source/styles/style2.css">

    <!-- <link rel="stylesheet" href="source/styles/style1.css"> -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        body {
            background: linear-gradient(90deg, #00009c 0%, #000000 100%);

        }

        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1px;
        }

        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 3px;
        }

        .node text {
            font: 13px sans-serif;
            fill: aquamarine;
        }
    </style>

    <title>Familie</title>

</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg bg-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html"><img src="source/images/112.jpg" alt=". . ."></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                Hermann
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        Familienbaum
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="hermann.html">Familienbaum</a></li>

                                    </ul>
                                </li>
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                        Vladimir</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li class="btn-group dropend">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                role="button" data-bs-toggle="dropdown" data-bs-auto-close="true"
                                                aria-expanded="false">
                                                ВС в конце
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                        Vladimir
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li class="btn-group dropend">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                role="button" data-bs-toggle="dropdown" data-bs-auto-close="true"
                                                aria-expanded="false">
                                                ВС в конце
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                Maier
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" aria-expanded="false">
                                        Familienbaum
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="maier.html">Familienbaum</a></li>

                                    </ul>
                                </li>
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                        Vladimir</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li class="btn-group dropend">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                role="button" data-bs-toggle="dropdown" data-bs-auto-close="true"
                                                aria-expanded="false">
                                                ВС в конце
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li class="btn-group dropend">
                                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                        data-bs-toggle="dropdown" data-bs-auto-close="true" aria-expanded="false">
                                        Vladimir
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                        <li class="btn-group dropend">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
                                                role="button" data-bs-toggle="dropdown" data-bs-auto-close="true"
                                                aria-expanded="false">
                                                ВС в конце
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                                <li><a class="dropdown-item" href="#">Элемент меню</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>



            </div>

            <script>
                document.querySelectorAll('.dropdown-menu a.dropdown-toggle').forEach(function (element) {
                    element.addEventListener('click', function (e) {
                        // Останавливаем всплывание события
                        e.stopPropagation();

                        let nextEl = element.nextElementSibling;
                        if (nextEl && nextEl.classList.contains('dropdown-menu')) {
                            e.preventDefault();
                            if (nextEl.style.display == 'block') {
                                nextEl.style.display = 'none';
                            } else {
                                nextEl.style.display = 'block';
                            }

                            // Закрыть другие подменю, кроме текущего
                            let openMenus = element.closest('.dropdown-menu').querySelectorAll('.dropdown-menu');
                            for (let i = 0; i < openMenus.length; i++) {
                                if (openMenus[i] !== nextEl) openMenus[i].style.display = 'none';
                            }
                        }
                    });
                });


            </script>
        </nav>
    </header>

    <section>

        <div class="row" id="svg1">

            <script>
                // Структура данных для первого дерева
                const data1 = {
                    name: "Konrad Hermann",
                    children: [
                        {
                            name: "Johann Peter Hermann",
                            children: [
                                {
                                    name: "Jakob Hermann",
                                    children: [
                                        {
                                            name: "Nikolaus Hermann",
                                            children: [
                                                {
                                                    name: "Johann Peter Hermann",
                                                    children: [
                                                        {
                                                            name: "Nikolaus Hermann",
                                                            children: [
                                                                {
                                                                    name: "Peter Hermann",
                                                                    children: [
                                                                        {
                                                                            name: "Alexander Hermann",
                                                                            children: [
                                                                                {
                                                                                    name: "Vladimir Hermann 11.04.1971",
                                                                                    children: [
                                                                                        {
                                                                                            name: "Violetta Hermann",
                                                                                        },
                                                                                        {
                                                                                            name: "Maxim Hermann",
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    name: "Juri Hermann",
                                                                                    children: [
                                                                                        {
                                                                                            name: "Vladislav Hermann",
                                                                                        },
                                                                                        {
                                                                                            name: "Michael Hermann",
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        },
                                                                        {
                                                                            name: "Viktor Hermann",
                                                                            children: [
                                                                                {
                                                                                    name: "Viktoria Hermann",
                                                                                    children: [
                                                                                        {
                                                                                            name: "Maxim Hermann",
                                                                                        }
                                                                                    ]
                                                                                },
                                                                                {
                                                                                    name: "Olga Hermann",
                                                                                    children: [
                                                                                        {
                                                                                            name: "Kamischa Hermann",
                                                                                        },
                                                                                        {
                                                                                            name: "Elisa Hermann",
                                                                                        }
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    ]
                                                                },
                                                            ]
                                                        },
                                                    ]
                                                },
                                            ]
                                        },
                                    ]
                                }
                            ]
                        },
                    ]
                };


                // Функция для обновления размера и отрисовки первого дерева
                function updateSize1() {
                    const width = window.innerWidth;
                    const height = window.innerHeight;
                    const margin = { top: 20, right: 150, bottom: 50, left: 150 }; // Отступы

                    const svg = d3.select('#svg1')
                        .attr('width', width)
                        .attr('height', height)
                        .select("g")
                        .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); // Смещение всего группового элемента

                    const root = d3.hierarchy(data1);
                    const treeLayout = d3.tree().size([height - margin.top - margin.bottom, width - margin.left - margin.right]);
                    treeLayout(root);

                    svg.selectAll('*').remove(); // Очищаем SVG перед отрисовкой нового дерева

                    // Создание связей (линий)
                    svg.selectAll('.link')
                        .data(root.links())
                        .enter()
                        .append('path')
                        .attr('class', 'link')
                        .attr('d', d3.linkHorizontal()
                            .x(d => width - margin.right - margin.left - d.y) // Зеркальное отображение
                            .y(d => d.x))
                        .attr('stroke', '#ccc') // Установка цвета линий
                        .attr('fill', 'none') // Убедиться, что фон линии прозрачный
                        .attr('stroke-width', 2); // Здесь устанавливаем толщину линий   

                    // Создание узлов
                    const nodes = svg.selectAll('.node')
                        .data(root.descendants())
                        .enter()
                        .append('g')
                        .attr('class', 'node')
                        .attr('transform', d => `translate(${width - margin.right - margin.left - d.y},${d.x}) scale(0.9)`); // Добавлено масштабирование

                    nodes.append('circle')
                        .attr('r', 5)
                        .on('click', (event, d) => {
                            console.log(d.data.name);
                        });

                    nodes.append('text')
                        .attr('dy', 3)
                        .attr('x', d => d.children ? 15 : -15)
                        .style("text-anchor", d => d.children ? "start" : "end")
                        .style("font-size", "12px")
                        .text(d => d.data.name)
                        .on('click', (event, d) => {
                            alert(`Информация о: ${d.data.name}`);
                        });
                }

                // Создание SVG для первого дерева
                const svg1 = d3.select('body').append('svg')
                    .attr('id', 'svg1')
                    .attr('width', '100%')
                    .attr('height', '50%')
                    .append("g");

                window.addEventListener('resize', () => {
                    updateSize1(); // Обновление для первого дерева
                    // updateSize2(); // Обновление для второго дерева
                }); // Обновление при изменении размеров окна

                updateSize1(); // Инициализация для первого дерева
                // updateSize2(); // Инициализация для второго дерева



            </script>

        </div>

        <div class="row" id="svg2">

        <script>

            // Структура данных для второго дерева
            const data2 = {
                name: "????",
                children: [
                    {
                        name: "Nikolaus-Bartel Maier",
                        children: [
                            {
                                name: "Peter Maier",
                                children: [
                                    {
                                        name: "Peter Maier",
                                        children: [
                                            {
                                                name: "Viktoria Hermann (Maier)",
                                                children: [
                                                    {
                                                        name: "Alexander Hermann",
                                                        children: [
                                                            {
                                                                name: "Vladimir Hermann",
                                                                children: [
                                                                    {
                                                                        name: "Violetta Hermann"
                                                                    },
                                                                    {
                                                                        name: "Maxim Hermann"
                                                                    }
                                                                ]
                                                            },
                                                            {
                                                                name: "Juri Hermann",
                                                                children: [
                                                                    {
                                                                        name: "Vladislav Hermann"
                                                                    },
                                                                    {
                                                                        name: "Michael Hermann"
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        name: "Viktor Hermann",
                                                        children: [
                                                            {
                                                                name: "Viktoria Hermann",
                                                                children: [
                                                                    { name: "Maxim Hermann" }
                                                                ]
                                                            },
                                                            {
                                                                name: "Olga Hermann",
                                                                children: [
                                                                    {
                                                                        name: "Kamischa Hermann"
                                                                    },
                                                                    {
                                                                        name: "Elisa Hermann"
                                                                    }
                                                                ]
                                                            }
                                                        ]
                                                    }
                                                ]
                                            },
                                        ]
                                    },
                                ]
                            }
                        ]
                    }
                ]
            };


            // Функция для обновления размера и отрисовки второго дерева
            function updateSize2() {
                const width = window.innerWidth;
                const height = window.innerHeight;
                const margin = { top: 150, right: 150, bottom: 150, left: 150 }; // Отступы

                const svg = d3.select('#svg2')
                    .attr('width', width)
                    .attr('height', height)
                    .select("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); // Смещение всего группового элемента

                const root = d3.hierarchy(data2);
                const treeLayout = d3.tree().size([height - margin.top - margin.bottom, width - margin.left - margin.right]);
                treeLayout(root);

                svg.selectAll('*').remove(); // Очищаем SVG перед отрисовкой нового дерева

                // Создание связей (линий)
                svg.selectAll('.link')
                    .data(root.links())
                    .enter()
                    .append('path')
                    .attr('class', 'link')
                    .attr('d', d3.linkHorizontal()
                        .x(d => width - margin.right - margin.left - d.y) // Зеркальное отображение
                        .y(d => d.x))
                    .attr('stroke', '#ccc') // Установка цвета линий
                    .attr('fill', 'none') // Убедиться, что фон линии прозрачный
                    .attr('stroke-width', 2); // Здесь устанавливаем толщину линий   

                // Создание узлов
                const nodes = svg.selectAll('.node')
                    .data(root.descendants())
                    .enter()
                    .append('g')
                    .attr('class', 'node')
                    .attr('transform', d => `translate(${width - margin.right - margin.left - d.y},${d.x}) scale(0.9)`); // Добавлено масштабирование

                nodes.append('circle')
                    .attr('r', 5)
                    .on('click', (event, d) => {
                        console.log(d.data.name);
                    });

                nodes.append('text')
                    .attr('dy', 3)
                    .attr('x', d => d.children ? 15 : -15)
                    .style("text-anchor", d => d.children ? "start" : "end")
                    .style("font-size", "12px")
                    .text(d => d.data.name)
                    .on('click', (event, d) => {
                        alert(`Информация о: ${d.data.name}`);
                    });
            }


            // Создание SVG для второго дерева
            const svg2 = d3.select('body').append('svg')
                .attr('id', 'svg2')
                .attr('width', '100%')
                .attr('height', '50%')
                .append("g");

            window.addEventListener('resize', () => {
                // updateSize1(); // Обновление для первого дерева
                updateSize2(); // Обновление для второго дерева
            }); // Обновление при изменении размеров окна

            // updateSize1(); // Инициализация для первого дерева
            updateSize2(); // Инициализация для второго дерева
        </script>

        </div>



    </section>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>



</body>

</html>